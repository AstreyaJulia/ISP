function MeteonovaInf(e){this.id=void 0!==e.id?e.id:"meteonova_inf_"+e.type+"_"+("object"==typeof e.cities?e.cities.join("_"):"auto"),this.cities="object"==typeof e.cities?e.cities.join("_"):"auto",this.type=e.type,this.url="//www.meteonova.ru",this.frcUrl=this.url+"/weather/",this.medUrl=this.url+"/med/",this.autoUrl=this.url+"/auto/",this.aviaUrl=this.url+"/avia/",this.data=[],this.frameResizeTimeout=null,this.scheme=e.scheme||{box_shadow:"inset #e9ecef 0 0 0 1px",border_radius:"4px",border_color:"#e9ecef",background_color:"#f1f3f5",city_color:"#343a40",main_color:"#495057",params_color:"#868e96"},this.dict={weekdays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],full_weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],tods:{tod0:"Ночь",tod1:"Утро",tod2:"День",tod3:"Вечер"},min_months:["Янв","Фев","Мар","Апр","Мая","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},this.install=function(){function t(a){if(void 0!==a){a=parseInt(a,10),isNaN(a)&&(a=-1);var r="meteonova_jsondata_";a<0&&(r=r+"m"+Math.abs(a)),a>0&&(r+=a);var c=window.document.createElement("script");c.type="text/javascript",c.src="//www.meteonova.ru/htmlinfdata"+("special"===n||"rubber"===n?i:"")+"/"+a,c.defer=!0;c.onload=c.onerror=function(){if(0==e.cities.length){var a="function "+(new Date).getTime()+"_"+Math.floor(72e5*Math.random())+36e5;!function(e){window[a]=function(){try{delete window[a]}catch(e){window[r]=void 0}e.draw(this,e.data)}}(o),c=window.document.createElement("script"),c.type="text/javascript",c.src="//www.meteonova.ru/informer/html/js/"+n+"/"+o.type+".js?callback="+a,c.charset="UTF-8",c.inftype=o.type,c.defer=!0,window.document.getElementsByTagName("head")[0].appendChild(c)}try{o.data.push(window[r].call());try{delete window[r]}catch(e){window[r]=void 0}}catch(e){o.data.push({})}t(e.cities.shift())},window.document.getElementsByTagName("head")[0].appendChild(c)}}var a="",r=document.getElementById(this.id);if(r&&(a=r.getAttribute("href"),-1!=a.search(/^\/\/(dev|www)[\.]{1}meteonova[\.]{1}(ru|ua)(\/(weather|frc|med|auto|avia)\/(-)*\d{3,}([-a-zA-z])*[\.]{1}htm$)*/i))){var o=this,n="multiple",i="";"auto"===this.cities&&(e.cities=["-1"]),1==e.cities.length&&-1===e.type.indexOf("multiple")&&(n="simple"),(e.type.indexOf("med")>-1||e.type.indexOf("auto")>-1||e.type.indexOf("avia")>-1)&&(n="special"),e.type.indexOf("rubber")>-1&&(n="rubber"),e.type.indexOf("med")>-1&&(i="med"),e.type.indexOf("auto")>-1&&(i="auto"),e.type.indexOf("avia")>-1&&(i="avia"),t(e.cities.shift())}},this.draw=function(t,a){var r=this,o=!!navigator.userAgent.match(/MSIE (6|7|8|9)/),n=document.createElement("IFRAME");n.setAttribute("width",void 0!==e.width?e.width:t.width),n.setAttribute("height",t.height),n.setAttribute("src",t.src),n.setAttribute("frameborder",t.frameborder),n.setAttribute("scrolling",t.scrolling),n.style.display="block",t.style=t.style.replace("%url%",this.url);try{var i=t.wrapper;contents=this.includeData(t,a)}catch(e){console.log(e),contents=['<div style="display: table; width: 100%; height: 100%"><div style="display: table-cell; vertical-align: middle;"><a href="//www.meteonova.ru" target="blank">\t\t<embed id="svgLogo"  type="image/svg+xml" src="//www.meteonova.ru/informer/html/icons/logo-main.svg" height="14"></a></div></div>']}i=i.replace("%content%",contents.join("")).replace(/%box_shadow%/g,this.scheme.box_shadow).replace("%border_radius%",this.scheme.border_radius).replace("%background_color%",this.scheme.background_color).replace("%border_color%",this.scheme.border_color).replace(/%city_color%/g,this.scheme.city_color).replace(/%main_color%/g,this.scheme.main_color).replace(/%params_color%/g,this.scheme.params_color);var c=(o?"<html>":"<!DOCTYPE html>")+'<head><title>Meteonova informer</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><style>'+t.style+'</style></head><body><div id="informer">'+i+"</div></body></html>",s=document.getElementById(this.id);if(s){s.innerHTML="";var l=function(e){e.height=e.contentWindow.document.body.offsetHeight+"px"};n.onload=function(){clearTimeout(r.frameResizeTimeout),r.frameResizeTimeout=setTimeout(function(){l(n),r.fillColorSvgIcon(d,"svgPress",r.scheme.city_color),r.fillColorSvgIcon(d,"svgWind",r.scheme.city_color)},250)},s.appendChild(n),n.onload=function(){clearTimeout(r.frameResizeTimeout),r.frameResizeTimeout=setTimeout(function(){l(n),r.fillColorSvgIcon(d,"svgPress",r.scheme.params_color),r.fillColorSvgIcon(d,"svgWind",r.scheme.params_color),r.fillColorSvgIcon(d,"svgHum",r.scheme.params_color),r.fillColorSvgIcon(d,"svgLogo",r.scheme.city_color),r.fillColorSvgIcon(d,"svgLogo"+(contents.length-1),r.scheme.city_color)},250)};var d=n.contentWindow||n.contentDocument.parentWindow;o||d.document.open(),d.document.write(c),o||d.document.close(),n.style.height=n.contentWindow.document.body.offsetHeight+"px";try{d.document.getElementsByTagName("a")[0].onclick=function(e){e.preventDefault();try{ga("send","event",r.type,"onclick",r.id)}catch(e){}window.location=this.getAttribute("href")}}catch(e){console.log(e)}}},this.includeData=function(t,a){var r=this;return contents=a.map(function(o,n){function i(e){var t={znak:"&ensp;",value:"",min:{znak:"&ensp;",value:""},max:{znak:"&ensp;",value:""}};e=parseInt(e,10),isNaN(e)&&(e=0),e<0&&(t.znak="&minus;"),e>0&&(t.znak="+"),t.value=Math.abs(e);var a=e-1;a<0&&(t.min.znak="&minus;"),a>0&&(t.min.znak="+"),t.min.value=Math.abs(a);var r=e+1;if(r<0&&(t.max.znak="&minus;"),r>0&&(t.max.znak="+"),t.max.value=Math.abs(r),a<-1){var o=t.max;t.max=t.min,t.min=o}return t}function c(e,t){var a=["Сeв","С-В","Вст","Ю-В","Южн","Ю-З","Зап","С-З","Штиль"],t=parseInt(t.value,10);return isNaN(t)&&(t=0),0==t?{dir:"штиль"}:{dir:a[e.value]+", ",speed:t}}var s=t.content,l=o.forecasts[0];return 0==n&&(r.alt="Погода "+l.name_2),s=s.replace(/%alt%/g,r.alt).replace(/%title%/g,r.alt).replace("%href%",void 0!==e.href?e.href:void 0===l.name_ref?l.href:r.frcUrl+l.index+"-"+l.name_ref+".htm").replace("%city%",l.name).replace(/%display%/g,n==a.length-1?"block":"none").replace(/%border_color%/g,r.scheme.border_color).replace("%logocount%",n),void 0!==o.currency&&(s=s.replace("%exchange_usd%",o.currency.exchange.usd.value).replace("%exchange_euro%",o.currency.exchange.eur.value)),l.forecast.forEach(function(e,t){var a=i(e.t.value,e.t.units);0==t&&(s=s.replace("%znak%",a.znak).replace("%temper%",a.value)),s=s.replace("%znak"+t+"%",a.znak).replace("%temper"+t+"%",a.value).replace("%znak_min"+t+"%",a.min.znak).replace("%temper_min"+t+"%",a.min.value).replace("%znak_max"+t+"%",a.max.znak).replace("%temper_max"+t+"%",a.max.value).replace(/%temper_units%/g,e.t.units).replace(/%deg%/g,e.t.units).replace("%pic"+t+"%",e.pic).replace("%pic"+t+"_descr%",e.descr).replace("%pic"+t+"_descr%",e.descr).replace("%pic"+t+"_descr%",e.descr).replace(/%press%/g,e.press.value).replace("%press"+t+"%",e.press.value).replace(/%press_units%/g,e.press.units).replace(/%hum%/g,e.hum.value).replace("%hum"+t+"%",e.hum.value).replace(/%hum_units%/g,e.hum.units);var o=c(e.wd,e.ws);0==t&&(s=s.replace(/%wind%/g,o.dir).replace(/%wind_speed%/g,void 0!==o.speed?o.speed:"").replace(/%wind_units%/g,void 0!==o.speed?e.ws.units:"")),s=s.replace("%wind"+t+"%",o.dir).replace("%wind_speed"+t+"%",void 0!==o.speed?o.speed:"").replace("%wind_units"+t+"%",void 0!==o.speed?e.ws.units:"").replace("%tod"+t+"%",r.dict.tods["tod"+e.tod]).replace("%date"+t+"%",r.dict.weekdays[e.weekday-1]+", ").replace("%hour"+t+"%",(e.hour.length>1?e.hour:"0"+e.hour)+":00")}),void 0!==l.forecast3&&l.forecast3.forEach(function(e,t){var a=i(e.t.value,e.t.units),o=i(e.tn.value,e.tn.units),n=c(e.wd,e.ws);s=s.replace("%forecast.znak"+t+"%",a.znak).replace("%forecast.temper"+t+"%",a.value).replace("%forecast.znak_min"+t+"%",a.min.znak).replace("%forecast.temper_min"+t+"%",a.min.value).replace("%forecast.znak_max"+t+"%",a.max.znak).replace("%forecast.temper_max"+t+"%",a.max.value).replace("%forecast.n.znak"+t+"%",o.znak).replace("%forecast.n.temper"+t+"%",o.value).replace("%forecast.n.znak_min"+t+"%",o.min.znak).replace("%forecast.n.temper_min"+t+"%",o.min.value).replace("%forecast.n.znak_max"+t+"%",o.max.znak).replace("%forecast.n.temper_max"+t+"%",o.max.value).replace(/%temper_units%/g,e.t.units).replace(/%deg%/g,e.t.units).replace("%forecast.pic"+t+"%",e.pic).replace("%forecast.pic"+t+"_descr%",e.descr).replace("%forecast.pic"+t+"_descr%",e.descr).replace("%forecast.wind"+t+"%",n.dir).replace("%forecast.wind_speed"+t+"%",void 0!==n.speed?n.speed:"").replace(/%wind_units%/g,void 0!==n.speed?e.ws.units:"").replace("%forecast.mindate"+t+"%",r.dict.weekdays[e.weekday-1]+", "+e.day).replace("%forecast.date"+t+"%",r.dict.weekdays[e.weekday-1]+", "+e.day+" "+r.dict.min_months[e.month-1].toLowerCase()).replace("%forecast.fulldate"+t+"%",r.dict.weekdays[e.weekday-1]+", "+e.day+" "+r.dict.months[e.month-1])}),void 0!==l.danger&&(l.danger.forEach(function(e,t){s=s.replace("%display_row%","table-row"),s=0===parseInt(e.dclass,10)?s.replace("%display_data%","none").replace("%display_data2%","none").replace("%display_data3%","none").replace("%display_nearest_time%","block"):s.replace("%display_data%","block").replace("%display_data2%","block").replace("%display_data3%","block").replace("%display_nearest_time%","none"),s=s.replace("%src%",'src="//www.meteonova.ru/informer/html/icons/'+e.dclass+'.svg"').replace("%descr"+t+"%",e.title).replace("%descr"+t+"%",e.title).replace("%descr"+t+"%",e.title),s=r.type.indexOf("rubber")>-1?s.replace("%min_dayofweek2%, %hours2%:00",0!==parseInt(e.dclass,10)?r.dict.weekdays[e.weekday-1]+", "+(e.hour.length>1?e.hour:"0"+e.hour)+":00":"").replace("%min_dayofweek3%, %day% %min_months% %hours3%:00",0!==parseInt(e.dclass,10)?r.dict.weekdays[e.weekday-1]+", "+e.day+" "+r.dict.min_months[e.month-1].toLowerCase()+" "+(e.hour.length>1?e.hour:"0"+e.hour)+":00":""):s.replace("%day%",e.day).replace("%min_months%",r.dict.min_months[e.month-1].toLowerCase()),s=s.replace("%min_dayofweek%",r.dict.weekdays[e.weekday-1]).replace("%dayofweek%",r.dict.full_weekdays[e.weekday-1]).replace("%months%",r.dict.months[e.month-1]).replace("%hours%",e.hour.length>1?e.hour:"0"+e.hour)}),s=s.replace(/%src%/g,"").replace(/%display_row%/g,"none").replace(/%display_data%/g,"none").replace(/%display_data2%/g,"none").replace(/%display_data3%/g,"none")),s})},this.fillColorSvgIcon=function(e,t,a){try{for(var r=e.document.getElementById(t).getSVGDocument().getElementsByTagName("path"),o=0;o<r.length;o++)r[o].setAttribute("fill",a)}catch(e){}},this.install(),-1==window.location.hostname.indexOf("meteonova")&&(!function(e,t,a,r,o,n,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,n=t.createElement(a),i=t.getElementsByTagName(a)[0],n.async=1,n.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(n,i)}(window,document,"script",0,"ga"),ga("create","UA-97494867-1","auto"),ga("send","pageview"),ga("send","event",this.type,"onshow",this.id))}Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var a,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),n=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(a=t),r=0;r<n;){var i;r in o&&(i=o[r],e.call(a,i,r,o)),r++}}),Array.prototype.map||(Array.prototype.map=function(e,t){var a,r,o;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(a=t),r=new Array(i),o=0;o<i;){var c,s;o in n&&(c=n[o],s=e.call(a,c,o,n),r[o]=s),o++}return r});
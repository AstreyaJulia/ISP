!function(){"use strict";const e={primary:"#6C5CE8",secondary:"#566577",info:"#1CC8EE",success:"#00B795",danger:"#ea1548",warning:"#F4B740",blue:"#3c64f4",indigo:"#2C3782",pink:"#ff63a5",red:"#ea1548",orange:"#ef630a",yellow:"#F4B740",green:"#00B795",teal:"#01CFC9",cyan:"#1CC8EE",azure:"#1c9aee",gray:"#566577","gray-dark":"#293545",light:"#E5E9F2",lighter:"#eff0f6",dark:"#1F2B3A"},t="disabled",o="border-danger";function a(e,o){0===Array.from(e).filter((e=>!e.validity.valid)).length?(o.disabled=!1,o.classList.remove(t)):(o.disabled=!0,o.classList.add(t))}function n(e){const t=e.querySelectorAll(".form-control:not(div)"),n=e.querySelector(".btn-submit");a(t,n),Array.from(t).forEach((i=>{i.addEventListener("input",(()=>{(function(e,t){t.validity.valid?function(e,t){t.querySelector(`#${e.id}-error`).textContent="",e.classList.remove(o)}(t,e):function(e,t,a){t.querySelector(`#${e.id}-error`).textContent=a,e.classList.add(o)}(t,e,t.validationMessage)})(e,i),a(t,n)}))}))}const i=document.querySelector(".cert-get");i&&i.addEventListener("click",(function(){!function(){let e=document.querySelector(".cert-select"),t=$(e).find(":selected").parent().attr("label"),o={quarter:e.value,year:t};v("GET","api/certificatework/getCertificateWork.php",o,"json",(e=>{!function(e){document.querySelector(".cert-table").innerHTML="";const t=e.data.map(((e,t,o,a,n,i,r,s,l,d,c,m,u,p,h,y,g)=>(({col_3:e,col_4:t,col_5:o,col_6:a,col_7:n,col_8:i,col_9:r,col_10:s,col_11:l,col_12:d,col_13:c,col_14:m,col_15:u,col_16:p,col_17:h,fullname:y,row_num:g})=>`<tr>\n<td>${g}</td>\n<td>${y}</td>\n<td>${e}</td>\n<td>${t}</td>\n<td>${o}</td>\n<td>${a}</td>\n<td>${n}</td>\n<td>${i}</td>\n<td>${r}</td>\n<td>${s}</td>\n<td>${l}</td>\n<td>${d}</td>\n<td>${c}</td>\n<td>${m}</td>\n<td>${u}</td>\n<td>${p}</td>\n<td>${h}</td>\n</tr>`)(e))).join("");document.querySelector(".cert-table").insertAdjacentHTML("beforeend",t)}(e)}))}()}));const r=document.querySelector(".tetris-wrapper"),s=()=>{const t=document.getElementById("game"),o=t.getContext("2d"),a=document.querySelector(".tetr-start-game"),n=document.getElementById("score"),i=n.getContext("2d"),r=()=>{const r=[],s=[];for(let e=-2;e<20;e++){s[e]=[];for(let t=0;t<10;t++)s[e][t]=0}const l={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],J:[[1,0,0],[1,1,1],[0,0,0]],L:[[0,0,1],[1,1,1],[0,0,0]],O:[[1,1],[1,1]],S:[[0,1,1],[1,1,0],[0,0,0]],Z:[[1,1,0],[0,1,1],[0,0,0]],T:[[0,1,0],[1,1,1],[0,0,0]]},d={I:e.info,O:e.warning,T:e.primary,S:e.success,Z:e.danger,J:e.blue,L:e.orange};let c=0,m=b(),u=null,p=!1,h=0,y=0,g=1,f="",v=document.querySelector(".user-name").innerHTML;function b(){0===r.length&&function(){const e=["I","J","L","O","S","T","Z"];for(;e.length;){const a=(t=0,o=e.length-1,t=Math.ceil(t),o=Math.floor(o),Math.floor(Math.random()*(o-t+1))+t),n=e.splice(a,1)[0];r.push(n)}var t,o}();const e=r.pop(),t=l[e];return{name:e,matrix:t,row:"I"===e?-1:-2,col:s[0].length/2-Math.ceil(t[0].length/2)}}function w(e,t,o){for(let a=0;a<e.length;a++)for(let n=0;n<e[a].length;n++)if(e[a][n]&&(o+n<0||o+n>=s[0].length||t+a>=s.length||s[t+a][o+n]))return!1;return!0}function k(){for(let e=0;e<m.matrix.length;e++)for(let n=0;n<m.matrix[e].length;n++)if(m.matrix[e][n]){if(m.row+e<0)return cancelAnimationFrame(u),p=!0,o.fillStyle="black",o.globalAlpha=.75,o.fillRect(0,t.height/2-30,t.width,60),o.globalAlpha=1,o.fillStyle="white",o.font="36px TT Norms Pro",o.textAlign="center",o.textBaseline="middle",o.fillText("GAME OVER!",t.width/2,t.height/2),a.disabled=!1,void(a.style.display="block");s[m.row+e][m.col+n]=m.name}for(let e=s.length-1;e>=0;)if(s[e].every((e=>!!e))){h+=10,g=Math.floor(h/100)+1,h>y&&(y=h,localStorage.record=y,f=v,localStorage.recordName=f);for(let t=e;t>=0;t--)for(let e=0;e<s[t].length;e++)s[t][e]=s[t-1][e]}else e--;m=b()}localStorage.length>0&&(y=localStorage.record,f=localStorage.recordName),document.addEventListener("keydown",(function(e){if(!p){if(37===e.which||39===e.which){const t=37===e.which?m.col-1:m.col+1;w(m.matrix,m.row,t)&&(m.col=t)}if(38===e.which){const e=function(e){const t=e.length-1;return e.map(((o,a)=>o.map(((o,n)=>e[t-n][a]))))}(m.matrix);w(e,m.row,m.col)&&(m.matrix=e)}if(40===e.which){const e=m.row+1;if(!w(m.matrix,e,m.col))return m.row=e-1,void k();m.row=e}}})),t.onblur=function(){const e=this;setTimeout((function(){e.focus()}),500)},u=requestAnimationFrame((function e(){u=requestAnimationFrame(e),o.clearRect(0,0,t.width,t.height);for(let e=0;e<20;e++)for(let t=0;t<10;t++)if(s[e][t]){const a=s[e][t];o.fillStyle=d[a],o.fillRect(32*t,32*e,31,31)}if(i.clearRect(0,0,n.width,n.height),i.globalAlpha=1,i.fillStyle="#1F2B3A",i.font="18px TT Norms Pro",i.fillText("Уровень: "+g,15,20),i.fillText("Очков:   "+h,15,50),i.fillText("Чемпион: "+f,160,20),i.fillText("Рекорд:  "+y,160,50),m){++c>36-g&&(m.row++,c=0,w(m.matrix,m.row,m.col)||(m.row--,k())),o.fillStyle=d[m.name];for(let e=0;e<m.matrix.length;e++)for(let t=0;t<m.matrix[e].length;t++)m.matrix[e][t]&&o.fillRect(32*(m.col+t),32*(m.row+e),31,31)}}))};a.addEventListener("click",(()=>{r(),a.style.display="none",a.focus=!1,t.focus()}))},l=(e.primary,e.warning,e.danger,e.success,e.info,document.querySelectorAll(".apexchart"),e=>{const t={series:[{name:"Население г. Сафоново",data:[43500,46100,45273,44444,43845,43477,43145,42707,42147,41510,41138,40537]}],chart:{height:350,type:"area"},colors:[colors.theme.secondary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.secondary,colors.theme.secondary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},o={series:[{name:"Население Смоленской области",data:[993018,982887,980482,975188,967896,964791,958630,953201,949348,942363,934889,921127]}],chart:{height:350,type:"area"},colors:[colors.theme.secondary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.secondary,colors.theme.secondary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},a={series:[{name:"Трудоспособное население Смоленской области",data:[633809,596862,627128,625958,593611,615842,607983,586273,598980,587725,587237]}],chart:{height:350,type:"area"},colors:[colors.theme.secondary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.secondary,colors.theme.secondary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},n={series:[{name:"Количество безработных в Смоленской области, тыс. человек",data:[40.8,41.5,30.9,28.1,26.9,32.8,31.4,29.8,26.2,25.3,25.3]}],chart:{height:350,type:"area"},colors:[colors.theme.secondary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.secondary,colors.theme.secondary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},i={series:[{name:"Уровень инфляции в России",data:[8.78,6.1,6.58,6.45,11.36,12.91,5.38,2.52,4.27,3.05,4.91,8.39]}],chart:{height:350,type:"area"},annotations:{yaxis:[{y:4,borderColor:"#00B795",label:{borderColor:"#00B795",style:{color:"#FFFFFF",background:"#00B795"},text:"Оптимальный уровень"}}],xaxis:[{x:2014,x2:2015,fillColor:"#f6bc9a",opacity:.4,label:{borderColor:"#f6bc9a",style:{color:"#fff",background:"#ef630a"},offsetY:-10,text:"Валютный кризис"}},{x:2020,label:{borderColor:"#ef630a",style:{color:"#FFFFFF",background:"#ef630a"},text:"Рецессия COVID-19"}}]},colors:[colors.theme.primary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.primary,colors.theme.primary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},r={series:[{name:"Исходящая почта",data:[11610,29513,28845,30240,23662,36230,41202,37862,36211,36859,34827,38381]}],chart:{height:350,type:"area"},colors:[colors.theme.primary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.primary,colors.theme.primary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},s={series:[{name:"Исходящая эл. почта",data:[1810,3170,3959]}],chart:{height:350,type:"area"},colors:[colors.theme.primary],dataLabels:{enabled:!1},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.primary,colors.theme.primary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},xaxis:{categories:[2019,2020,2021]},tooltip:{x:{show:!1}}},l={series:[{name:"Входящая почта",data:[4147,9372,12395,12226,11378,11481,11418,12372,11721,11917,12308,15209]}],chart:{height:350,type:"area"},colors:[colors.theme.green],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.green,colors.theme.green],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},d={series:[{name:"Входящая эл. почта",data:[6489,8384,10450]}],chart:{height:350,type:"area"},colors:[colors.theme.green],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.green,colors.theme.green],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2019,2020,2021]},tooltip:{x:{show:!1}}},c={series:[{name:"Гражданские дела",data:[1777,1935,2108,2892,2784,2593,2454,2145,1785,1388,1587,1893]}],chart:{height:350,type:"area"},colors:[colors.theme.red],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.red,colors.theme.red],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},m={series:[{name:"Гражданские дела (область)",data:[30095,28470,31392,32393,34753,33232,31409,21203,24391,18543,23220]}],chart:{height:350,type:"area"},colors:[colors.theme.red],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.red,colors.theme.red],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},u={series:[{name:"Гражданские дела ап. инстанции",data:[45,62,43,60,58,57,42,35,51,68,58,49]}],chart:{height:350,type:"area"},colors:[colors.theme.orange],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.orange,colors.theme.orange],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},p={series:[{name:"Дела об адм. правонарушениях",data:[30,25,33,1096,1044,844,817,882,695,467,382,1157]}],chart:{height:350,type:"area"},colors:[colors.theme.blue],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.blue,colors.theme.blue],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},h={series:[{name:"Дела об адм. правонарушениях (область)",data:[1487,1334,1315,6150,5856,5316,5080,5352,5232,4805,6768]}],chart:{height:350,type:"area"},colors:[colors.theme.blue],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.blue,colors.theme.blue],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},y={series:[{name:"Жалобы по адм. делам",data:[0,0,0,0,166,204,205,198,145,138,123,96]}],chart:{height:350,type:"area"},colors:[colors.theme.teal],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.teal,colors.theme.teal],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},g={series:[{name:"Уголовные дела",data:[275,366,364,294,360,373,254,214,282,251,240,297]}],chart:{height:350,type:"area"},colors:[colors.theme.yellow],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.yellow,colors.theme.yellow],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},f={series:[{name:"Уголовные дела (область)",data:[4124,4038,3696,3257,3799,3563,3210,2217,3061,3626,3713]}],chart:{height:350,type:"area"},colors:[colors.theme.yellow],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.yellow,colors.theme.yellow],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},v={series:[{name:"Уголовные дела ап. инстанции",data:[15,30,17,17,13,8,14,9,9,6,13,9]}],chart:{height:350,type:"area"},colors:[colors.theme.azure],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.azure,colors.theme.azure],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},b={series:[{name:"Материалы в порядке уг. производства, всего",data:[545,3440,2634,1662,1232,1852,1926,1604,2216,1564,1494,1157]}],chart:{height:350,type:"area"},colors:[colors.theme.cyan],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.cyan,colors.theme.cyan],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021]},tooltip:{x:{show:!1}}},w={series:[{name:"Обращения, без исковых",data:[87,230,423,624]}],chart:{height:350,type:"area"},colors:[colors.theme.primary],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.primary,colors.theme.primary],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2018,2019,2020,2021]},tooltip:{x:{show:!1}}},k={series:[{name:"Исковые заявления",data:[21,43,35,128]}],chart:{height:350,type:"area"},colors:[colors.theme.green],fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",gradientToColors:[colors.themeLighter.green,colors.theme.green],opacityFrom:.7,opacityTo:.55,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[2018,2019,2020,2021]},tooltip:{x:{show:!1}}},x={chart:{height:350,type:"line",toolbar:{show:!0}},grid:{show:!1},legend:{show:!1},dataLabels:{enabled:!1},colors:[colors.theme.success],stroke:{width:3,curve:"smooth"},series:[],noData:{text:"Loading..."},yaxis:{show:!1,labels:{show:!1},axisBorder:{show:!1}}};switch(e){case"safpeopleChart":return t;case"postinboxChart":return l;case"postoutboxChart":return r;case"gcaseChart":return c;case"g1caseChart":return u;case"admcaseChart":return p;case"adm1caseChart":return y;case"ucaseChart":return g;case"u1caseChart":return v;case"mucaseChart":return b;case"eosChart":return w;case"eosgcaseChart":return k;case"successLineChart":return x;case"inflationChart":return i;case"gcaseOblChart":return m;case"ucaseOblChart":return f;case"smolOblpeopleChart":return o;case"smolOblnoworkChart":return n;case"admcaseOblChart":return h;case"smolOblworkpeopleChart":return a;case"emailoutboxChart":return s;case"emailinboxChart":return d}}),d=(e,t)=>{let o=new ApexCharts(e,l(t));o.render(),o.updateSeries(l(t).series)},c=document.querySelector(".navigation-menu"),m=document.querySelector(".spinner-wrapper");function u(e,t){const o=e,a=[];switch(t){case"selected":for(let e=0;e<o.length;e++)o[e].checked&&a.push(o[e].value.toLowerCase());return a;case"all":for(let e=0;e<o.length;e++)a.push(o[e].value.toLowerCase());return a}}function p(e,t,o){const a=document.querySelector(".toasts-container"),n=a.querySelectorAll(".hide");n&&n.forEach((e=>{a.removeChild(e)}));const i='<div class="toast fade" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-header"><i class="mdi mdi-message-alert-outline"></i><strong class="me-auto">'+e+'</strong><small class="text-muted">'+o+'</small><button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Закрыть"></button></div><div class="toast-body">'+t+"</div></div>";a.insertAdjacentHTML("beforeend",i),[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e)})).forEach((e=>e.show()))}function h(e,t,o){const a=document.querySelector(".toasts-container"),n=a.querySelectorAll(".hide");n&&n.forEach((e=>{a.removeChild(e)}));const i='<div class="toast fade" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-header"><i class="mdi mdi-alert text-danger"></i><strong class="me-auto text-danger">'+e+'</strong><small class="text-muted">'+o+'</small><button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Закрыть"></button></div><div class="toast-body">'+t+"</div></div>";a.insertAdjacentHTML("beforeend",i),[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e,{autohide:!1})})).forEach((e=>e.show()))}function y(e,t){const o=document.querySelector(".toasts-container"),a=o.querySelectorAll(".hide");a&&a.forEach((e=>{o.removeChild(e)}));const n='<div class="toast align-items-center bg-'+t+'-lighter" role="alert" aria-live="assertive" aria-atomic="true"><div class="d-flex"><div class="toast-body">'+e+'</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Закрыть"></button></div></div>';o.insertAdjacentHTML("beforeend",n),[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e)})).forEach((e=>e.show()))}function g(e){const t=e+"=",o=document.cookie.split(";");for(let e=0;e<o.length;e++){let a=o[e];for(;" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}OverlayScrollbars(document.querySelectorAll(".overlayscrollbar"),{resize:"none",sizeAutoCapable:!0,clipAlways:!0,normalizeRTL:!0,paddingAbsolute:!1,autoUpdate:null,autoUpdateInterval:33,updateOnLoad:["img"],nativeScrollbarsOverlaid:{showNativeScrollbars:!1,initialize:!0},overflowBehavior:{x:"scroll",y:"scroll"},scrollbars:{visibility:"auto",autoHide:"never",autoHideDelay:800,dragScrolling:!0,clickScrolling:!1,touchSupport:!0,snapHandle:!1},textarea:{dynWidth:!1,dynHeight:!1,inheritedAttrs:["style","class"]},callbacks:{onInitialized:null,onInitializationWithdrawn:null,onDestroyed:null,onScrollStart:null,onScroll:null,onScrollStop:null,onOverflowChanged:null,onOverflowAmountChanged:null,onDirectionChanged:null,onContentSizeChanged:null,onHostSizeChanged:null,onUpdated:null}}),g("aut[sudo]");const f=g("aut[id]"),v=(e,t,o,a,n)=>{let i=new XMLHttpRequest;switch(e){case"GET":let a;a=null!==o?"object"!=typeof o||Array.isArray(o)?o:Object.keys(o).map((e=>e+"="+o[e])).join("&"):null,i.open(e,t+"?"+a,!0),i.setRequestHeader("Accept","application/json, text/plain, */*"),i.send(null);break;case"POST":i.open(e,t,!0),i.setRequestHeader("Accept","application/json, text/plain, */*"),i.send(o)}i.onreadystatechange=()=>{if(4!==i.readyState)return;let t="";if(200===i.status){let t;if("GET"===e)if("json"===a){t="string"!=typeof i.response?JSON.stringify(i.response):i.response;try{JSON.parse(i.response),t=JSON.parse(i.response),n(t)}catch(e){h("Ошибка",i.responseText,moment().tz("Europe/Moscow").format("YYYY-MM-DD"))}}else"text"===a&&n(i.responseText);"POST"===e&&(i.response?h("Ошибка",i.response,moment().tz("Europe/Moscow").format("YYYY-MM-DD")):n("null"))}else 0===i.status?(t="Не подключено. Проверьте сеть",h(t,i.responseText,moment().tz("Europe/Moscow").format("YYYY-MM-DD"))):404===i.status?(t="404. Not Found. Запрашиваемая страница не найдена ",h(t,i.responseText,moment().tz("Europe/Moscow").format("YYYY-MM-DD"))):500===i.status&&(t="Внутренняя ошибка сервера [500]",h(t,i.responseText,moment().tz("Europe/Moscow").format("YYYY-MM-DD")))}},b=document.querySelector(".back-to-top"),w=document.querySelector(".main-content"),k=()=>{w.scrollTop>20?b.style.display="flex":b.style.display="none"},x=()=>{w.scrollTop=0},S=document.querySelector(".sidebar-toggle-button"),L=document.querySelector(".page-body"),E=document.querySelector(".sidebar-expand-button"),T=document.querySelector(".main-sidebar"),q=()=>{T.classList.contains("expanded")?T.classList.remove("expanded"):T.classList.add("expanded")},C=document.querySelector(".sidebar-close-button"),M=()=>{T.classList.remove("expanded")},_=()=>{T.classList.add("expanded")},A=document.querySelector(".tumbler__wrapper");A&&A.addEventListener("click",(()=>{let e=new FormData;e.append("module","theme"),"main-dark"===L.dataset.themeName?(L.dataset.themeName="main-light",e.append("theme","main-light")):"main-light"===L.dataset.themeName&&(L.dataset.themeName="main-dark",e.append("theme","main-dark")),v("POST","pages/admin/ajax.php",e,"json",(e=>e)),A.classList.toggle("tumbler--night-mode")}));const D=document.querySelector(".top-search-button-toggle"),F=document.querySelector(".top-search"),H=document.querySelector(".top-search-close"),I=()=>{F.classList.add("open")},P=()=>{F.classList.remove("open")},B=document.getElementById("profession"),Y=document.getElementById("affiliation"),O=()=>{"6"===B.options[B.selectedIndex].value||"7"===B.options[B.selectedIndex].value||"9"===B.options[B.selectedIndex].value?Y.disabled=!1:(Y.disabled=!0,Y.selectedIndex=0)},z=document.getElementById("active"),R=document.getElementById("room"),j=()=>{"1"===z.options[z.selectedIndex].value?R.disabled=!1:(R.disabled=!0,R.selectedIndex=0)},W=document.querySelector(".list-tab-group .list-group"),N=document.querySelector(".tab-content");if(W&&N){const e=W.querySelectorAll(".list-group-item"),t=N.querySelectorAll(".tab-list-group"),o=o=>{const a=o.target.closest(".list-group-item");if(null!=a){for(let t=0,o=e.length;t<o;t++)e[t].classList.remove("active");a.classList.add("active");for(let e=0,o=t.length;e<o;e++)t[e].classList.remove("active"),a.id+"-list"===t[e].id&&t[e].classList.add("active")}};e[0]&&t[0]&&(e[0].classList.add("active"),t[0].classList.add("active")),W.addEventListener("click",(e=>{o(e)}))}const U=document.querySelectorAll(".btn-back");if(U)for(let e=0;e<U.length;e++)U[e].addEventListener("click",(function(){window.history.back()}));const G=document.querySelectorAll(".btn-print");G&&G.forEach((function(e){e.addEventListener("click",(()=>{window.print()}))}));const X=document.querySelector(".passcode-switch"),J=document.querySelectorAll(".passinput"),V=()=>{"password"===J[0].type?(J.forEach((e=>e.type="text")),X.classList.toggle("is-hidden")):(J.forEach((e=>e.type="password")),X.classList.toggle("is-hidden"))};document.querySelectorAll(".bs-tooltip").forEach((function(e){new bootstrap.Tooltip(e,{selector:'[data-bs-toggle="tooltip"]'})})),document.querySelectorAll('[data-bs-toggle="popover"]').forEach((function(e){new bootstrap.Popover(e)}));const K=()=>{const e=w.scrollTop/(w.scrollHeight-w.clientHeight)*100,t=document.querySelector(".topprogressbar");t&&(t.style.width=e+"%")},Z=[{color:"primary",name:"События"},{color:"success",name:"Отпуск"},{color:"info",name:"Дежурство"},{color:"warning",name:"Важно"},{color:"danger",name:"Праздники"},{color:"pink",name:"Категория 1"},{color:"blue",name:"Категория 2"},{color:"orange",name:"Категория 3"},{color:"teal",name:"Категория 4"},{color:"azure",name:"Категория 5"}],Q=function(){let e=new Map;for(let t=0;t<Z.length;t++)e.set(Z[t].color,Z[t].color);return Object.fromEntries(e)}(),ee=document.querySelector(".today-calendar-widget"),te=document.getElementById("calendar"),oe={addEventButton:".add-event-button",addDelEventModal:".add-del-event-modal",addEventFormSubmit:".add-update-event-submit",addEventTitle:".add-event-title",closeAddEventModalCrossButton:".btn-close",cancelBtn:".delete-discard-event-button",daysForRepeatEvents:["MO","TU","WE","TH","FR","SA","SU"],deleteWarningMessage:".delete-warning",calEventFilter:".calendar-events-filter",filterInput:".input-filter",selectAll:".select-all",privateinp:"Private",repeatparams:".repeat-col",timezone:"Europe/Moscow",datetimeformat:"YYYY-MM-DD HH:mm",bddatetimeformat:"YYYY-MM-DD HH:mm",datepickerformat:"Y-m-d H:i"};function ae(e){document.querySelector(e.addEventButton);const t=document.querySelector(e.addDelEventModal),o=document.querySelector(e.addEventFormSubmit),a=document.querySelector(e.addEventTitle),i=t.querySelector(e.closeAddEventModalCrossButton),r=document.querySelector(e.cancelBtn),s=document.querySelector(e.deleteWarningMessage),l=document.forms.eventForm;let d=l.elements.eventTitle,c=l.elements.dateStart,m=l.elements.dateEnd;const p=l.elements.privateCheck,h=l.elements.selectLabel,g=l.elements.allDaySwitch,b=l.elements.repeatSwitch,w=l.elements.eventDescription,k=document.querySelector(e.calEventFilter),x=document.querySelectorAll(e.filterInput),S=document.querySelector(e.selectAll),L=document.getElementById(e.privateinp),E=document.querySelector(e.repeatparams),T=document.getElementById("dayrepopt"),q=document.getElementById("weekly-section"),C=document.getElementById("monthly-section"),M=document.getElementById("interval-section"),_=document.getElementById("daynum-label"),A=document.getElementById("intervallabel1"),D=document.getElementById("startrep-date"),F=document.getElementById("endrep-date"),H=(document.getElementById("nav-rep"),document.querySelectorAll(".wdays-check")),I=document.getElementById("Radio5"),P=document.getElementById("Radio6"),B=document.getElementById("Radio1"),Y=document.getElementById("month1"),O=document.getElementById("month2"),z=document.getElementById("month3"),R=document.getElementById("month4"),j=document.getElementById("month5"),W=document.getElementById("endrep-date"),N=document.getElementById("repcount"),U=document.getElementById("daynum"),G=document.getElementById("dayofmonth");let X;function J(d){switch(i.addEventListener("click",oe),b.addEventListener("click",(()=>function(t){if(!0===b.checked){if(null==t){const t=moment().tz(e.timezone).format(e.datetimeformat);D.value=t,F.value=moment(t).tz(e.timezone).add(9,"years").format(e.datetimeformat)}else{const o=moment(t).tz(e.timezone).format(e.datetimeformat);D.value=o,F.value=moment(o).tz(e.timezone).add(9,"years").format(e.datetimeformat)}E.style.display="block",T.required=!0}else E.style.display="none",D.value="",F.value="",T.value="none",T.required=!1;n(l)}(moment(c.value).format(e.datetimeformat)))),T.addEventListener("change",(()=>function(e){switch(e){case"none":M.style.display="none",q.style.display="none",C.style.display="none",B.checked=!1;break;case"daily-section":M.style.display="block",q.style.display="none",C.style.display="none",B.checked=!1,A.textContent="Каждый",_.textContent="день",U.setAttribute("max","31");break;case"weekly-section":M.style.display="block",q.style.display="block",C.style.display="none",B.checked=!1,A.textContent="Каждую",_.textContent="неделю",U.setAttribute("max","53");break;case"monthly-section":M.style.display="block",q.style.display="none",C.style.display="block",B.checked=!0,G.value=moment(c.value.date()),A.textContent="Каждый",_.textContent="месяц",U.setAttribute("max","12");break;case"yearly-section":M.style.display="block",q.style.display="none",C.style.display="none",B.checked=!1,A.textContent="Каждый",_.textContent="год",U.setAttribute("max","100")}}(T.options[T.selectedIndex].value))),g.addEventListener("click",(function(){let t,o;!0===g.checked?(t=moment(c.value).hour(0).minutes(0).format(e.datetimeformat),o=moment(m.value).hour(23).minutes(59).format(e.datetimeformat)):(t=moment(c.value).hour(moment().hour()).minutes(moment().minutes()).format(e.datetimeformat),o=moment(m.value).hour(moment().hour()).minutes(moment().minutes()).format(e.datetimeformat)),ne.setDate(t,!0),ie.setDate(o,!0)})),c.addEventListener("change",(function(){c.value>m.value&&(m.value=c.value)})),m.addEventListener("change",(function(){c.value>m.value&&(c.value=m.value)})),I.addEventListener("click",(function(){!0===I.checked?(W.nextSibling.disabled=!1,W.disabled=!1,P.checked=!1):(W.nextSibling.disabled=!0,W.disabled=!0,W.value="",re.setDate("",!0))})),P.addEventListener("click",(function(){!0===P.checked?(N.disabled=!1,I.checked=!1):(N.disabled=!0,N.value="")})),d){case"add":o.textContent="Добавить",r.textContent="Отмена",a.textContent="Добавить событие",o.addEventListener("click",de),r.addEventListener("click",oe),s.classList.add("d-none");break;case"update":o.textContent="Обновить",r.textContent="Удалить",a.textContent="Редактировать событие",r.addEventListener("click",ee),o.addEventListener("click",K)}t.classList.add("show"),t.style.display="block";const u=document.createElement("div");u.setAttribute("class","modal-backdrop fade show"),document.body.appendChild(u),n(l)}function V(){let t=[];return Array.from(H).map(((o,a)=>{!0===o.checked&&t.push(e.daysForRepeatEvents[a])})),t.join(", ")}const K=()=>{let o=new FormData;o.append("operation","upd"),o.append("id",X.id),o.append("title",$(t).find(d).val());let a=$(t).find(d).val();o.append("start",$(t).find(c).val()),o.append("end",$(t).find(m).val()),o.append("calendar",$(h).val()),o.append("private",$(p).prop("checked")?"1":"0"),o.append("description",$(w).val()),o.append("tzid",e.timezone),o.append("allDay",$(g).prop("checked")?"1":"0"),$(b).prop("checked")?(""!==o.interval?o.append("interval",$(U).val()):o.append("interval","0"),"daily-section"===T.options[T.selectedIndex].value?o.append("freq","DAILY"):"weekly-section"===T.options[T.selectedIndex].value?(o.append("freq","WEEKLY"),""!==V()?o.append("byweekday",V()):o.append("byweekday","0")):"monthly-section"===T.options[T.selectedIndex].value?(o.append("freq","MONTHLY"),$(Y).prop("checked")?(o.append("byweekday","MO, TU, WE, TH, FR, SA, SU"),o.append("bysetpos","-1")):$(O).prop("checked")?(o.append("byweekday","MO, TU, WE, TH, FR, SA, SU"),o.append("bysetpos","-2")):$(z).prop("checked")?(o.append("byweekday","MO, TU, WE, TH, FR, SA, SU"),o.append("bysetpos","1")):$(R).prop("checked")?(o.append("byweekday","MO, TU, WE, TH, FR"),o.append("bysetpos","1")):$(j).prop("checked")&&(o.append("byweekday","MO, TU, WE, TH, FR"),o.append("bysetpos","-1"))):"yearly-section"===T.options[T.selectedIndex].value?o.append("freq","YEARLY"):"none"===T.options[T.selectedIndex].value&&(o.append("freq","0"),o.append("byweekday","0"),o.append("bysetpos","0")),o.append("dtstart",moment($(D).val()).format(e.datetimeformat)),$(I).prop("checked")?o.append("until",moment($(F).val()).format(e.datetimeformat)):o.append("until","0"),$(P).prop("checked")?o.append("count",$(N).val()):o.append("count","0"),o.append("dtstart",moment($(D).val()).format(e.datetimeformat)),$(I).prop("checked")&&o.append("until",moment($(F).val()).format(e.datetimeformat)),$(P).prop("checked")&&o.append("count",$(N).val())):o.append("interval","0"),X.extendedProps.user_id===f||JSON.stringify(X.extendedProps.user_id)===f?v("POST","components/fullcalendar/ajax.php",o,"json",(e=>function(e,t){oe(),"null"===e&&y("Событие "+t+" обновлено","info"),se.refetchEvents()}(e,a))):y("Вы не имеете прав на правку события "+a,"danger")},ee=()=>{let e=new FormData;e.append("operation","del"),e.append("id",X.id);let t=X.title;X.extendedProps.user_id===f||JSON.stringify(X.extendedProps.user_id)===f?v("POST","components/fullcalendar/ajax.php",e,"json",(e=>function(e,t){oe(),"null"===e&&y("Событие "+t+" удалено","danger"),se.refetchEvents()}(e,t))):y("Вы не имеете прав на удаление события "+t,"danger")},oe=()=>{!function(){t.style.display="none",t.classList.remove("show");const e=document.querySelector(".modal-backdrop");e&&document.body.removeChild(e)}(),ce(),o.removeEventListener("click",K),o.removeEventListener("click",de),r.removeEventListener("click",ee),r.removeEventListener("click",oe),s.classList.add("d-none")};function ae(e){return e.id?"<span class='bullet bg-"+$(e.element).data("label")+" bullet-sm me-2 ms-2'> </span>"+e.text:e.text}!function(){const e=document.getElementById("calEventFilter");e.textContent="",e.insertAdjacentHTML("beforeend",'<p class="group-title mb-2">Календарь:</p>'),e.insertAdjacentHTML("beforeend",'<div class="form-check d-flex align-items-center mb-3">\n                  <input class="form-check-input input-filter bg-dark select-all me-1" type="checkbox" id="select-all"\n                         name="select-all" checked>\n                  <label class="form-check-label" for="select-all">Все</label>\n                </div>');const t=Z.map((e=>(({color:e,name:t})=>`<div class="form-check d-flex align-items-center mb-2">\n                  <input class="form-check-input input-filter bg-${e} me-1" type="checkbox" id="${e}" name="${e}"\n                         data-value="${e}" value="${e}" checked>\n                  <label class="form-check-label" for="${e}">${t}</label>\n                </div>`)(e))).join("");e.insertAdjacentHTML("beforeend",t)}(),function(){h.textContent="",h.insertAdjacentHTML("beforeend","<option></option>");const e=Z.map((e=>(({color:e,name:t})=>`<option data-label="${e}" value="${e}">${t}</option>`)(e))).join("");h.insertAdjacentHTML("beforeend",e)}(),$(h).wrap('<div class="position-relative"></div>').select2({placeholder:"Выберите значение",dropdownParent:$(h).parent(),templateResult:ae,templateSelection:ae,minimumResultsForSearch:-1,escapeMarkup:function(e){return e}});const ne=c.flatpickr({locale:"ru",enableTime:!0,altInput:!0,altFormat:"d.m.Y H:i",dateFormat:e.datepickerformat}),ie=m.flatpickr({locale:"ru",enableTime:!0,altInput:!0,altFormat:"d.m.Y H:i",dateFormat:e.datepickerformat,onReady:function(e,t,o){}}),re=(D.flatpickr({locale:"ru",enableTime:!0,altInput:!0,altFormat:"d.m.Y H:i",dateFormat:e.datepickerformat}),F.flatpickr({locale:"ru",enableTime:!0,altInput:!0,altFormat:"d.m.Y H:i",dateFormat:e.datepickerformat})),se=new FullCalendar.Calendar(te,{themeSystem:"standard",locale:"ru",timeZone:e.timezone,initialView:"dayGridMonth",editable:!0,dragScroll:!1,eventResizableFromStart:!1,selectable:!0,selectMirror:!0,businessHours:!1,handleWindowResize:!0,nowIndicator:!0,dayMaxEvents:!0,navLinks:!0,eventClassNames:function({event:e}){return["fc-event-"+Q[e._def.extendedProps.calendar]]},eventSources:[function(t,o){const a=document.querySelectorAll(".input-filter:not(.select-all)");let n={startParam:moment(t.start).tz(e.timezone).format("YYYY-MM-DD"),endParam:moment(t.end).tz(e.timezone).format("YYYY-MM-DD"),calendars:u(a,"selected"),private:!0===L.checked?1:0};v("GET","components/fullcalendar/events.php",n,"json",(e=>o(e)))}],customButtons:{addEvBtn:{text:"+ Добавить событие",click:function(){le(null)}}},headerToolbar:{left:"addEvBtn",right:"dayGridMonth,timeGridWeek,timeGridDay today prev,title,next"},eventMouseEnter:function(e){"background"!==e.event.display&&function(e){const t="popover-"+e.event.extendedProps.calendar.toLowerCase();new bootstrap.Popover(e.el,{template:'<div class="popover '+t+'" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',title:e.event.title,content:e.event.extendedProps.description,placement:"top"}).show()}(e)},eventMouseLeave:function(){document.querySelectorAll(".popover").forEach((function(e){document.body.removeChild(e)}))},dateClick:function(e){le(e)},eventClick:function(a){!function(a){""!==a.event.id&&"background"!==a.event.display&&(X=a.event,X.extendedProps.user_id===f||JSON.stringify(X.extendedProps.user_id)===f?(o.disabled=!1,r.disabled=!1):(o.disabled=!0,r.disabled=!0),function(o){let a=o.event;d.value=a.title,p.checked=!(0===a.extendedProps.private||"0"===a.extendedProps.private);const n=moment(o.date).format(e.datetimeformat);ne.setDate(n,!0,e.datetimeformat),ie.setDate(n,!0,e.datetimeformat),null!==a._def.recurringDef?(s.classList.remove("d-none"),function(e){switch(e){case 3:T.value="daily-section",q.style.display="none",C.style.display="none",M.style.display="block",A.innerHTML="Каждый",_.innerHTML="день",U.setAttribute("max","31");break;case 2:T.value="weekly-section",q.style.display="block",C.style.display="none",M.style.display="block",A.innerHTML="Каждую",_.innerHTML="неделю",U.setAttribute("max","53");break;case 1:T.value="monthly-section",C.style.display="block",q.style.display="none",M.style.display="block",A.innerHTML="Каждый",_.innerHTML="месяц",U.setAttribute("max","12"),function(e,t){switch(e){case"null":B.checked=!0,G.value=a._def.recurringDef.typeData.rruleSet._rrule[0].options.bymonthday[0];break;case"1":break;case"-1":"[0,1,2,3,4]"===t?j.checked=!0:"[0,1,2,3,4]"===t?R.checked=!0:"[0,1,2,3,4,5,6]"===t?z.checked=!0:"[0,1,2,3,4,5,6]"===t&&(Y.checked=!0)}}(a._def.recurringDef.typeData.rruleSet._rrule[0].options.bysetpos,JSON.stringify(a._def.recurringDef.typeData.rruleSet._rrule[0].options.byweekday));break;case 0:T.value="yearly-section",q.style.display="none",C.style.display="none",M.style.display="block",A.innerHTML="Каждый",_.innerHTML="год",U.setAttribute("max","100");break;case null:T.value=""}}(a._def.recurringDef.typeData.rruleSet._rrule[0].options.freq),2===a._def.recurringDef.typeData.rruleSet._rrule[0].options.freq&&a._def.recurringDef.typeData.rruleSet._rrule[0].options.byweekday.map(((e,t)=>{H[e].checked=!0})),b.checked=!0,E.style.display="block",T.required=!0,D.value=moment(a._def.recurringDef.typeData.rruleSet._rrule[0].options.dtstart).utc().format(e.datetimeformat),a._def.recurringDef.typeData.rruleSet._rrule[0].options.until?(F.value=moment(a._def.recurringDef.typeData.rruleSet._rrule[0].options.until).utc().format(e.datetimeformat),I.checked=!0,F.checked=!1):(F.value="",I.checked=!1,F.checked=!0),a._def.recurringDef.typeData.rruleSet._rrule[0].options.count?(N.value=a._def.recurringDef.typeData.rruleSet._rrule[0].options.count,P.checked=!0):(N.value="",P.checked=!1)):b.checked=!1,ne.setDate(a.start,!0,e.datetimeformat),!0===a.allDay?g.checked=!0:g.checked=!1,null!==a.end?ie.setDate(a.end,!0,e.datetimeformat):ie.setDate(a.start,!0,e.datetimeformat),$(t).find(h).val(a.extendedProps.calendar).trigger("change"),$(t).find(w).val(a.extendedProps.description)}(a),J("update"))}(a)}});function le(t){if(ce(),J("add"),null==t)$(c).val(""),$(m).val("");else{const o=moment(t.date).format(e.datetimeformat);ne.setDate(o,!0,e.datetimeformat),ie.setDate(o,!0,e.datetimeformat)}}function de(){let t=new FormData;t.append("operation","add"),t.append("title",d.value);let o=d.value;t.append("start",moment(c.value).format(e.datetimeformat)),t.append("end",moment(m.value).format(e.datetimeformat)),t.append("calendar",h.value),t.append("description",w.value),t.append("private",!0===p.checked?"1":"0"),t.append("user_id",f),t.append("tzid",e.timezone),!0===g.checked&&t.append("allDay","1"),!0===b.checked&&(t.append("interval",U.value),"daily-section"===T.options[T.selectedIndex].value?t.append("freq","DAILY"):"weekly-section"===T.options[T.selectedIndex].value?(t.append("freq","WEEKLY"),t.append("byweekday",V())):"monthly-section"===T.options[T.selectedIndex].value?(t.append("freq","MONTHLY"),!0===Y.checked?(t.append("byweekday","MO, TU, WE, TH, FR, SA, SU"),t.append("bysetpos","-1")):!0===z.checked?(t.append("byweekday","MO, TU, WE, TH, FR, SA, SU"),t.append("bysetpos","1")):!0===R.checked?(t.append("byweekday","MO, TU, WE, TH, FR"),t.append("bysetpos","1")):!0===j.checked&&(t.append("byweekday","MO, TU, WE, TH, FR"),t.append("bysetpos","-1"))):"yearly-section"===T.options[T.selectedIndex].value&&t.append("freq","YEARLY"),t.append("dtstart",moment(D.value).format("YYYY-MM-DD HH:mm")),!0===I.checked&&t.append("until",moment(F.value).format("YYYY-MM-DD HH:mm")),!0===P.checked&&t.append("count",N.value)),v("POST","components/fullcalendar/ajax.php",t,"json",(e=>function(e,t){oe(),"null"===e&&y("Событие "+t+" добавлено","success"),se.refetchEvents()}(e,o)))}function ce(){l.reset(),E.style.display="none",$(t).find(h).val("").trigger("change"),M.style.display="none",q.style.display="none",C.style.display="none"}if(se.render(),setInterval((()=>{se.refetchEvents()}),1e3),t.addEventListener("hidden.bs.modal",ce),document.querySelector(".select-all")){const e=document.querySelector(".calendar-events-filter"),t=document.querySelector(".select-all");$(t).on("change",(function(){$(this).prop("checked")?$(e).find("input").prop("checked",!0):$(e).find("input").prop("checked",!1),se.refetchEvents()}))}$(x)&&document.querySelectorAll(".input-filter:not(.select-all)").forEach((e=>{e.addEventListener("click",(()=>{".input-filter:checked".length<$(k).find("input").length?$(S).prop("checked",!1):$(S).prop("checked",!0),se.refetchEvents()}))})),$(L)&&$(L).on("change",(function(){se.refetchEvents()}))}const ne=()=>{$("td[colspan]").not("[colspan=1]").after('<td style="display: none;"></td>'),$(".dataTable.sort").DataTable({lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Все"]],language:{processing:"Подождите...",search:"Поиск:",lengthMenu:"Показать _MENU_ записей",info:"Записи _START_ - _END_ из _TOTAL_",infoEmpty:"Записи с 0 по 0 из 0 записей",infoFiltered:"(отфильтровано из _MAX_ записей)",loadingRecords:"Загрузка записей...",zeroRecords:"Записи отсутствуют.",emptyTable:"В таблице отсутствуют данные",paginate:{first:"Первая",previous:"‹",next:"›",last:"Последняя"},aria:{sortAscending:": активировать для сортировки столбца по возрастанию",sortDescending:": активировать для сортировки столбца по убыванию"},select:{rows:{_:"Выбрано записей: %d",0:"Кликните по записи для выбора",1:"Выбрана одна запись"},1:"%d ряд выбран",_:"%d ряда(-ов) выбрано",cells:{1:"1 ячейка выбрана",_:"Выбрано %d ячеек"},columns:{1:"1 столбец выбран",_:"%d столбцов выбрано"}},searchBuilder:{conditions:{string:{startsWith:"Начинается с",contains:"Содержит",empty:"Пусто",endsWith:"Заканчивается на",equals:"Равно",not:"Не",notEmpty:"Не пусто"},date:{after:"После",before:"До",between:"Между",empty:"Пусто",equals:"Равно",not:"Не",notBetween:"Не между",notEmpty:"Не пусто"},number:{empty:"Пусто",equals:"Равно",gt:"Больше чем",gte:"Больше, чем равно",lt:"Меньше чем",lte:"Меньше, чем равно",not:"Не",notEmpty:"Не пусто",between:"Между",notBetween:"Не между ними"},array:{equals:"Равно",empty:"Пусто",contains:"Содержит",not:"Не равно",notEmpty:"Не пусто",without:"Без"}},data:"Данные",deleteTitle:"Удалить условие фильтрации",logicAnd:"И",logicOr:"Или",title:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},value:"Значение",add:"Добавить условие",button:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},clearAll:"Очистить всё",condition:"Условие"},searchPanes:{clearMessage:"Очистить всё",collapse:{0:"Панели поиска",_:"Панели поиска (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Нет панелей поиска",loadMessage:"Загрузка панелей поиска",title:"Фильтры активны - %d"},thousands:",",buttons:{pageLength:{_:"Показать 10 строк","-1":"Показать все ряды",1:"Показать 1 ряд"},pdf:"PDF",print:"Печать",collection:'Коллекция <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>',colvis:"Видимость столбцов",colvisRestore:"Восстановить видимость",copy:"Копировать",copyKeys:"Нажмите ctrl or u2318 + C, чтобы скопировать данные таблицы в буфер обмена.  Для отмены, щелкните по сообщению или нажмите escape.",copySuccess:{1:"Скопирована 1 ряд в буфер обмена",_:"Скопировано %ds рядов в буфер обмена"},copyTitle:"Скопировать в буфер обмена",csv:"CSV",excel:"Excel"},decimal:".",infoThousands:",",autoFill:{cancel:"Отменить",fill:"Заполнить все ячейки <i>%d<i></i></i>",fillHorizontal:"Заполнить ячейки по горизонтали",fillVertical:"Заполнить ячейки по вертикали",info:"Пример автозаполнения"},datetime:{previous:"Предыдущий",next:"Следующий",hours:"Часы",minutes:"Минуты",seconds:"Секунды",unknown:"Неизвестный",amPm:["AM","PM"]},editor:{close:"Закрыть",create:{button:"Новый",title:"Создать новую запись",submit:"Создать"},edit:{button:"Изменить",title:"Изменить запись",submit:"Изменить"},remove:{button:"Удалить",title:"Удалить",submit:"Удалить",confirm:{_:"Вы точно хотите удалить %d строк?",1:"Вы точно хотите удалить 1 строку?"}},multi:{restore:"Отменить изменения"}}}}),$(".dataTable.nosort").DataTable({ordering:!1,lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Все"]],language:{processing:"Подождите...",search:"Поиск:",lengthMenu:"Показать _MENU_ записей",info:"Записи _START_ - _END_ из _TOTAL_",infoEmpty:"Записи с 0 по 0 из 0 записей",infoFiltered:"(отфильтровано из _MAX_ записей)",loadingRecords:"Загрузка записей...",zeroRecords:"Записи отсутствуют.",emptyTable:"В таблице отсутствуют данные",paginate:{first:"Первая",previous:"‹",next:"›",last:"Последняя"},aria:{sortAscending:": активировать для сортировки столбца по возрастанию",sortDescending:": активировать для сортировки столбца по убыванию"},select:{rows:{_:"Выбрано записей: %d",0:"Кликните по записи для выбора",1:"Выбрана одна запись"},1:"%d ряд выбран",_:"%d ряда(-ов) выбрано",cells:{1:"1 ячейка выбрана",_:"Выбрано %d ячеек"},columns:{1:"1 столбец выбран",_:"%d столбцов выбрано"}},searchBuilder:{conditions:{string:{startsWith:"Начинается с",contains:"Содержит",empty:"Пусто",endsWith:"Заканчивается на",equals:"Равно",not:"Не",notEmpty:"Не пусто"},date:{after:"После",before:"До",between:"Между",empty:"Пусто",equals:"Равно",not:"Не",notBetween:"Не между",notEmpty:"Не пусто"},number:{empty:"Пусто",equals:"Равно",gt:"Больше чем",gte:"Больше, чем равно",lt:"Меньше чем",lte:"Меньше, чем равно",not:"Не",notEmpty:"Не пусто",between:"Между",notBetween:"Не между ними"},array:{equals:"Равно",empty:"Пусто",contains:"Содержит",not:"Не равно",notEmpty:"Не пусто",without:"Без"}},data:"Данные",deleteTitle:"Удалить условие фильтрации",logicAnd:"И",logicOr:"Или",title:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},value:"Значение",add:"Добавить условие",button:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},clearAll:"Очистить всё",condition:"Условие"},searchPanes:{clearMessage:"Очистить всё",collapse:{0:"Панели поиска",_:"Панели поиска (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Нет панелей поиска",loadMessage:"Загрузка панелей поиска",title:"Фильтры активны - %d"},thousands:",",buttons:{pageLength:{_:"Показать 10 строк","-1":"Показать все ряды",1:"Показать 1 ряд"},pdf:"PDF",print:"Печать",collection:'Коллекция <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>',colvis:"Видимость столбцов",colvisRestore:"Восстановить видимость",copy:"Копировать",copyKeys:"Нажмите ctrl or u2318 + C, чтобы скопировать данные таблицы в буфер обмена.  Для отмены, щелкните по сообщению или нажмите escape.",copySuccess:{1:"Скопирована 1 ряд в буфер обмена",_:"Скопировано %ds рядов в буфер обмена"},copyTitle:"Скопировать в буфер обмена",csv:"CSV",excel:"Excel"},decimal:".",infoThousands:",",autoFill:{cancel:"Отменить",fill:"Заполнить все ячейки <i>%d<i></i></i>",fillHorizontal:"Заполнить ячейки по горизонтали",fillVertical:"Заполнить ячейки по вертикали",info:"Пример автозаполнения"},datetime:{previous:"Предыдущий",next:"Следующий",hours:"Часы",minutes:"Минуты",seconds:"Секунды",unknown:"Неизвестный",amPm:["AM","PM"]},editor:{close:"Закрыть",create:{button:"Новый",title:"Создать новую запись",submit:"Создать"},edit:{button:"Изменить",title:"Изменить запись",submit:"Изменить"},remove:{button:"Удалить",title:"Удалить",submit:"Удалить",confirm:{_:"Вы точно хотите удалить %d строк?",1:"Вы точно хотите удалить 1 строку?"}},multi:{restore:"Отменить изменения"}}}}),$(".dataTable.userstable").DataTable({ajax:"api/phonebook/getphonebook.php",lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Все"]],language:{processing:"Подождите...",search:"Поиск:",lengthMenu:"Показать _MENU_ записей",info:"Записи _START_ - _END_ из _TOTAL_",infoEmpty:"Записи с 0 по 0 из 0 записей",infoFiltered:"(отфильтровано из _MAX_ записей)",loadingRecords:"Загрузка записей...",zeroRecords:"Записи отсутствуют.",emptyTable:"В таблице отсутствуют данные",paginate:{first:"Первая",previous:"‹",next:"›",last:"Последняя"},aria:{sortAscending:": активировать для сортировки столбца по возрастанию",sortDescending:": активировать для сортировки столбца по убыванию"},select:{rows:{_:"Выбрано записей: %d",0:"Кликните по записи для выбора",1:"Выбрана одна запись"},1:"%d ряд выбран",_:"%d ряда(-ов) выбрано",cells:{1:"1 ячейка выбрана",_:"Выбрано %d ячеек"},columns:{1:"1 столбец выбран",_:"%d столбцов выбрано"}},searchBuilder:{conditions:{string:{startsWith:"Начинается с",contains:"Содержит",empty:"Пусто",endsWith:"Заканчивается на",equals:"Равно",not:"Не",notEmpty:"Не пусто"},date:{after:"После",before:"До",between:"Между",empty:"Пусто",equals:"Равно",not:"Не",notBetween:"Не между",notEmpty:"Не пусто"},number:{empty:"Пусто",equals:"Равно",gt:"Больше чем",gte:"Больше, чем равно",lt:"Меньше чем",lte:"Меньше, чем равно",not:"Не",notEmpty:"Не пусто",between:"Между",notBetween:"Не между ними"},array:{equals:"Равно",empty:"Пусто",contains:"Содержит",not:"Не равно",notEmpty:"Не пусто",without:"Без"}},data:"Данные",deleteTitle:"Удалить условие фильтрации",logicAnd:"И",logicOr:"Или",title:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},value:"Значение",add:"Добавить условие",button:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},clearAll:"Очистить всё",condition:"Условие"},searchPanes:{clearMessage:"Очистить всё",collapse:{0:"Панели поиска",_:"Панели поиска (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Нет панелей поиска",loadMessage:"Загрузка панелей поиска",title:"Фильтры активны - %d"},thousands:",",buttons:{pageLength:{_:"Показать 10 строк","-1":"Показать все ряды",1:"Показать 1 ряд"},pdf:"PDF",print:"Печать",collection:'Коллекция <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>',colvis:"Видимость столбцов",colvisRestore:"Восстановить видимость",copy:"Копировать",copyKeys:"Нажмите ctrl or u2318 + C, чтобы скопировать данные таблицы в буфер обмена.  Для отмены, щелкните по сообщению или нажмите escape.",copySuccess:{1:"Скопирована 1 ряд в буфер обмена",_:"Скопировано %ds рядов в буфер обмена"},copyTitle:"Скопировать в буфер обмена",csv:"CSV",excel:"Excel"},decimal:".",infoThousands:",",autoFill:{cancel:"Отменить",fill:"Заполнить все ячейки <i>%d<i></i></i>",fillHorizontal:"Заполнить ячейки по горизонтали",fillVertical:"Заполнить ячейки по вертикали",info:"Пример автозаполнения"},datetime:{previous:"Предыдущий",next:"Следующий",hours:"Часы",minutes:"Минуты",seconds:"Секунды",unknown:"Неизвестный",amPm:["AM","PM"]},editor:{close:"Закрыть",create:{button:"Новый",title:"Создать новую запись",submit:"Создать"},edit:{button:"Изменить",title:"Изменить запись",submit:"Изменить"},remove:{button:"Удалить",title:"Удалить",submit:"Удалить",confirm:{_:"Вы точно хотите удалить %d строк?",1:"Вы точно хотите удалить 1 строку?"}},multi:{restore:"Отменить изменения"}}}})},ie=document.querySelector(".faq-categories-doc"),re=document.querySelector(".faq-body"),se=document.querySelector(".loading-spinner-faq"),le=document.querySelectorAll(".faq-category-subitem a"),de=document.querySelector(".faq-categories-list");ie&&re&&se&&le&&le.forEach((e=>{e.addEventListener("click",(e=>{(e=>{const t=e.target.closest("a");if(!t)return;const o=t.dataset.link;ie.style.display="block",se.style.display="inline-block";let a=new XMLHttpRequest;if(new XMLHttpRequest)a=new XMLHttpRequest;else if(new ActiveXObject("Msxml2.XMLHTTP"))a=new ActiveXObject("Msxml2.XMLHTTP");else{if(!new ActiveXObject("Microsoft.XMLHTTP"))return null;a=new ActiveXObject("Microsoft.XMLHTTP")}a?(a.open("GET",o,!0),a.onreadystatechange=()=>{4===a.readyState&&200===a.status&&(re.innerHTML="",re.insertAdjacentHTML("beforeend",a.responseText),ne())},a.send(null)):document.location=o})(e)}))})),de&&de.querySelectorAll(".faq-category").forEach((e=>{e.addEventListener("click",(e=>{(e=>{e.target.parentElement.classList.toggle("active")})(e)}))}));const ce=document.querySelector(".modal-multiaction"),me=document.querySelectorAll(".btnmodal-multiaction");ce&&me&&me.forEach((e=>{e.addEventListener("click",(e=>{(e=>{const t=e.target.closest("a"),o=ce.querySelector(".btn-del"),a=ce.querySelector(".header-1"),n=ce.querySelector(".header-2"),i=ce.querySelector(".text-1"),r=ce.querySelector(".text-2"),s=ce.querySelector(".btn-discard"),l=ce.querySelector(".btn-close");function d(){ce.style.display="none",ce.classList.remove("show");const e=document.querySelector(".modal-backdrop");e&&document.body.removeChild(e)}if($(l).on("click",(function(){d(),o.href=""})),$(s).on("click",(function(){d(),o.href=""})),!t)return;const c=t.dataset.link,m=t.dataset.modaction;(c||m)&&("1"===m&&(n.style.display="none",r.style.display="none",a.style.display="block",i.style.display="block"),"2"===m&&(a.style.display="none",i.style.display="none",n.style.display="block",r.style.display="block"),o.href=c,function(){ce.classList.add("show"),ce.style.display="block";const e=document.createElement("div");e.setAttribute("class","modal-backdrop fade show"),document.body.appendChild(e)}())})(e)}))}));const ue=document.querySelector(".phonebook-filter"),pe=document.getElementById("filter"),he=()=>{let e=ue.querySelectorAll("input[type=checkbox]"),t=u(e,"selected");if(0===t.length){let t={filter:u(e,"all")};v("GET","components/phonebook/ajax.php",t,"text",(e=>{pe.innerHTML="",pe.innerHTML=e}))}else v("GET","components/phonebook/ajax.php",{filter:t},"text",(e=>{pe.innerHTML="",pe.innerHTML=e}))};ue&&pe&&ue.querySelectorAll("input[type=checkbox]").forEach((function(e){e.addEventListener("click",(()=>{he()}))}));const ye=document.querySelector(".todo-wrapper"),ge=()=>{let e;const t=document.querySelector(".add-task"),o=document.getElementById("new-task-modal"),a=document.getElementById("task-form"),n=document.querySelector(".task-title-status"),i=document.querySelector(".add-task-title"),r=document.querySelector(".edit-task-title"),s=document.querySelector(".btn-close"),l=document.querySelector(".add-task-btn"),d=document.querySelector(".edit-task"),c=document.querySelector(".btn-delete-task"),m=document.querySelector(".btn-dismiss"),u=(document.querySelector(".sidebar-left"),document.querySelector(".sidebar-menu-list"),document.querySelector(".list-group-filters")),h=document.querySelector(".list-group-labels"),y=document.getElementById("todo-search"),g=document.querySelector(".no-results"),f=document.querySelector(".sort-asc"),v=document.querySelector(".sort-desc"),b=document.querySelector(".todo-task-list"),w=document.querySelector(".todo-task-list-wrapper"),k=document.querySelector(".due-date"),x=document.getElementById("ask-description"),S=document.getElementById("cat-select"),L=document.querySelector(".private-switch");let E=[{id:1,title:"Задача",created:"2021-08-13 09:00:00",deadline:"2021-08-31 09:00:00",tag:"primary",user_id:"1",completed:"false",deleted:"false",description:"описание"},{id:2,title:"Задача 2",created:"2021-08-12 09:00:00",deadline:"2021-08-18 09:00:00",tag:"danger",user_id:"1",completed:"true",deleted:"true",description:""},{id:3,title:"Задача с большим описанием, которое надо обрезать в ращметке, чтобы не разывало контейнер",created:"2021-08-12 09:00:00",deadline:"2021-08-10 09:00:00",tag:"warning",user_id:"1",completed:"false",deleted:"false",description:""},{id:4,title:"Просто задача без названия",created:"2021-08-14 09:00:00",deadline:"2021-08-23 09:00:00",tag:"success",user_id:"1",completed:"false",deleted:"false",description:""},{id:5,title:'Задача с "кавычками"',created:"2021-08-01 09:00:00",deadline:"2021-09-18 09:00:00",tag:"info",user_id:"1",completed:"true",deleted:"true",description:""},{id:6,title:"Задача 2",created:"2021-08-12 09:00:00",deadline:"2021-08-18 09:00:00",tag:"primary",user_id:"1",completed:"true",deleted:"true",description:""}];function T(){o.style.display="none",o.classList.remove("show");const e=document.querySelector(".modal-backdrop");e&&document.body.removeChild(e)}function q(){o.classList.add("show"),o.style.display="block";const e=document.createElement("div");e.setAttribute("class","modal-backdrop fade show"),document.body.appendChild(e)}function C(){$(k).val(""),$(x).val(""),$(S).val(""),$(L).prop("checked",!1)}$(s).on("click",(function(){T(),C()})),$(m).on("click",(function(){T(),C()})),u&&$(u).find("a").on("click",(function(){$(u).find("a").hasClass("active")&&$(u).find("a").removeClass("active"),$(this).addClass("active")})),h&&$(h).find("a").on("click",(function(){$(h).find("a").hasClass("active")&&$(h).find("a").removeClass("active"),$(this).addClass("active")})),S&&($(S).wrap('<div class="position-relative"></div>'),$(S).select2({placeholder:"Выберите метку"})),k&&$(k).flatpickr({locale:"ru",enableTime:!0,dateFormat:"Y-m-d H:i",defaultDate:"today"}),a&&($(a).validate({rules:{todoTitleAdd:{required:!0},"task-due-date":{required:!0}}}),$(a).on("submit",(function(e){if(e.preventDefault(),$(a).valid()){const e=$(".sidebar-todo-modal .new-todo-item-title").val(),t=$(".sidebar-todo-modal .task-due-date").val(),o=new Date(t),a=new Intl.DateTimeFormat("en",{month:"short"}).format(o)+" "+new Intl.DateTimeFormat("en",{day:"2-digit"}).format(o),n=$(".task-tag").val(),i={Team:"primary",Low:"success",Medium:"warning",High:"danger",Update:"info"};$.each(n,(function(e,t){i[t]})),""!==e&&$(b).prepend('<li class="todo-item"><div class="todo-title-wrapper"><div class="todo-title-area"><i class="mdi mdi-dots-vertical"></i><div class="title-wrapper"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="customCheck100" /><label class="custom-control-label" for="customCheck100"></label></div><span class="todo-title">'+e+'</span></div></div><div class="todo-item-action"><div class="badge-wrapper mr-1">'+todoBadge+'</div><small class="text-nowrap text-muted mr-1">'+a+"</small></div></div></li>"),p("Задача сохранена","Сохранено 💾","Сейчас"),T()}}))),$(w).on("change",".custom-checkbox",(function(){const e=$(this).find("input");e.prop("checked")?(e.closest(".todo-item").addClass("completed"),p("Задача завершена","Поздравляем 🎉","Сейчас")):e.closest(".todo-item").removeClass("completed")})),$(w).on("click",".custom-checkbox",(function(e){e.stopPropagation()})),$(document).on("click",".todo-task-list-wrapper .todo-item",(function(){q(),l.style.display="none",m.style.display="none",d.style.display="block",c.style.display="block",i.style.display="none",r.style.display="block",$(this).hasClass("completed")?$(n).html('<button type="button" class="btn btn-sm btn-outline-success complete-todo-item waves-effect waves-float waves-light" data-dismiss="modal">Завершена</button>'):$(n).html('<button type="button" class="btn btn-sm btn-outline-secondary complete-todo-item waves-effect waves-float waves-light" data-dismiss="modal">Не завершена</button>'),$(S).val("").trigger("change"),e=$(this).find(".todo-title");const t=$(this).find(".todo-title").html();$(a).find(".new-todo-item-title").val(t)})),d&&$(d).on("click",(function(t){const o=$(a).valid();if(t.preventDefault(),o){const t=a.find(".new-todo-item-title").val();$(e).text(t),p("Задача сохранена","Сохранено 💾","Сейчас"),T()}})),f&&$(f).on("click",(function(){$(w).find("li").sort((function(e,t){return $(t).find(".todo-title").text().toUpperCase()<$(e).find(".todo-title").text().toUpperCase()?1:-1})).appendTo(b)})),v&&$(v).on("click",(function(){$(w).find("li").sort((function(e,t){return $(t).find(".todo-title").text().toUpperCase()>$(e).find(".todo-title").text().toUpperCase()?1:-1})).appendTo(b)})),y&&$(y).on("keyup",(function(){const e=$(this).val().toLowerCase();""!==e?($(".todo-item").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})),0===$(".todo-item:visible").length?$(g).hasClass("show")||$(g).addClass("show"):$(g).removeClass("show")):($(".todo-item").show(),$(g).hasClass("show")&&$(g).removeClass("show"))})),$(t).on("click",(function(){q(),$(l).style.display="block",$(m).style.display="none",$(d).style.display="block",$(c).style.display="none",$(i).style.display="block",$(r).style.display="none"})),(()=>{b.innerHTML="";const e=E.map((e=>(({id:e,deadline:t,tag:o,title:a})=>`<li class="todo-item">\n              <div class="todo-title-wrapper">\n                <div class="todo-title-area">\n                  <div class="title-wrapper">\n                    <div class="custom-control custom-checkbox">\n                      <input type="checkbox" class="form-check-input" id="task-${e}">\n                      <label class="custom-control-label" for="task-${e}"></label>\n                    </div>\n                    <span class="todo-title">${a}</span>\n                  </div>\n                </div>\n                <div class="todo-item-action">\n                <div class="tag-container">\n                <span class="bullet bullet-sm bullet-${o} me-2" id="tag-${e}"></span>\n</div>\n                  <small class="text-nowrap text-muted me-1">${moment(t).tz("Europe/Moscow").format("LLL")}</small>\n                </div>\n              </div>\n            </li>`)(e))).join("");b.insertAdjacentHTML("beforeend",e)})()},fe=()=>{const e=new XMLHttpRequest,t={200:{desc:"гроза с небольшим дождем",day:"wi-day-thunderstorm",night:"wi-night-alt-thunderstorm"},201:{desc:"гроза с дождем",day:"wi-day-thunderstorm",night:"wi-night-alt-thunderstorm"},202:{desc:"гроза с сильным дождем",day:"wi-day-thunderstorm",night:"wi-night-alt-thunderstorm"},210:{desc:"небольшая гроза",day:"wi-day-lightning",night:"wi-night-alt-lightning"},212:{desc:"сильная гроза",day:"wi-day-lightning",night:"wi-night-alt-lightning"},221:{desc:"очень сильная гроза",day:"wi-day-lightning",night:"wi-night-alt-lightning"},230:{desc:"гроза с мелким дождем",day:"wi-day-thunderstorm",night:"wi-night-alt-thunderstorm"},231:{desc:"гроза с средним дождем",day:"wi-day-thunderstorm",night:"wi-night-alt-thunderstorm"},232:{desc:"гроза с сильным дождем",day:"wi-day-thunderstorm",night:"wi-night-alt-thunderstorm"},300:{desc:"слабая морось",day:"wi-day-hail",night:"wi-night-alt-hail"},301:{desc:"морось",day:"wi-day-hail",night:"wi-night-alt-hail"},302:{desc:"сильная морось",day:"wi-day-hail",night:"wi-night-alt-hail"},310:{desc:"слабый моросящий дождь",day:"wi-day-hail",night:"wi-night-alt-hail"},311:{desc:"моросящий дождь",day:"wi-day-hail",night:"wi-night-alt-hail"},312:{desc:"сильный моросящий дождь",day:"wi-day-hail",night:"wi-night-alt-hail"},313:{desc:"ливневый дождь и морось",day:"wi-day-hail",night:"wi-night-alt-hail"},314:{desc:"ливневый дождь и изморось",day:"wi-day-hail",night:"wi-night-alt-hail"},321:{desc:"ливень",day:"wi-day-rain",night:"wi-night-alt-rain"},500:{desc:"небольшой дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},501:{desc:"умеренный дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},502:{desc:"сильный дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},503:{desc:"очень сильный дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},504:{desc:"сильный дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},511:{desc:"ледяной дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},520:{desc:"слабый ливневый дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},521:{desc:"ливень",day:"wi-day-rain",night:"wi-night-alt-rain"},522:{desc:"сильный ливневый дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},531:{desc:"частично ливневый дождь",day:"wi-day-rain",night:"wi-night-alt-rain"},600:{desc:"легкий снег",day:"wi-day-snow",night:"wi-night-alt-snow"},601:{desc:"снег",day:"wi-day-snow",night:"wi-night-alt-snow"},602:{desc:"сильный снегопад",day:"wi-day-snow",night:"wi-night-alt-snow"},611:{desc:"мокрый снег",day:"wi-day-rain-mix",night:"wi-night-alt-rain-mix"},612:{desc:"слабый мокрый снег",day:"wi-day-rain-mix",night:"wi-night-alt-rain-mix"},613:{desc:"ливень с мокрым снегом",day:"wi-day-rain-mix",night:"wi-night-alt-rain-mix"},615:{desc:"небольшой дождь и снег",day:"wi-day-rain-mix",night:"wi-night-alt-rain-mix"},616:{desc:"дождь со снегом",day:"wi-day-rain-mix",night:"wi-night-alt-rain-mix"},620:{desc:"небольшой снегопад",day:"wi-day-snow",night:"wi-night-alt-snow"},621:{desc:"снегопад",day:"wi-day-snow",night:"wi-night-alt-snow"},622:{desc:"сильный снегопад",day:"wi-day-snow",night:"wi-night-alt-snow"},701:{desc:"туман",day:"wi-day-fog",night:"wi-night-fog"},711:{desc:"дым",day:"wi-smoke",night:"wi-smoke"},721:{desc:"дымка",day:"wi-smoke",night:"wi-smoke"},731:{desc:"песчано-пыльные вихри",day:"wi-sandstorm",night:"wi-sandstorm"},741:{desc:"туман",day:"wi-smog",night:"wi-smog"},751:{desc:"песок",day:"wi-sandstorm",night:"wi-sandstorm"},761:{desc:"пыль",day:"wi-dust",night:"wi-dust"},762:{desc:"вулканический пепел",day:"wi-volcano",night:"wi-volcano"},771:{desc:"шквал",day:"wi-strong-wind",night:"wi-strong-wind"},781:{desc:"смерч",day:"wi-tornado",night:"wi-tornado"},800:{desc:"безоблачно",day:"wi-day-sunny",night:"wi-night-clear"},801:{desc:"небольшая облачность: 11-25%",day:"wi-day-cloudy",night:"wi-night-alt-cloudy"},802:{desc:"средняя облачность: 25-50%",day:"wi-cloudy",night:"wi-cloudy"},803:{desc:"высокая облачность: 51-84%",day:"wi-cloudy",night:"wi-cloudy"},804:{desc:"очень высокая облачность: 85-100%",day:"wi-cloudy",night:"wi-cloudy"}};e.addEventListener("readystatechange",(function(){if(e.readyState===e.DONE&&200===e.status){let o=JSON.parse(e.response);if(404===o.cod)document.querySelector(".weather-info").innerHTML="";else{let e={state:"",icon:"",temp_max:""},a="";moment().hour()>=7&&moment().hour()<=21&&(a="day"),(moment().hour()<=6&&moment().hour()>=0||moment().hour()>=22&&moment().hour()<=23)&&(a="night"),e.state=t[o.weather[0].id].desc,e.icon=t[o.weather[0].id][a],e.temp_max=Math.round(o.main.temp_max-273.15),e.temp_max>0?e.temp_max="+"+e.temp_max+"°":e.temp_max=e.temp_max+"°";const n='<a class="d-flex align-items-center justify-content-center" style="text-decoration: none;" data-bs-toggle="tooltip" data-bs-placement="bottom" title="'+e.state+'" data-bs-original-title="'+e.state+'">\n              <p class="m-0 p-0" style="font-size: 23px; color: #5552d9; font-weight: 700; line-height: normal;">'+e.temp_max+'</p>\n              <i class="ms-2 d-flex align-items-center justify-content-center wi '+e.icon+'" style="width=35px; height: 35px;"></i>\n            </a>';document.querySelector(".weather-info").innerHTML="",document.querySelector(".weather-info").insertAdjacentHTML("beforeend",n)}}})),e.open("GET","https://api.openweathermap.org/data/2.5/weather?id=499452&appid=0590d73840a4e5980796c90f4f20e0a4"),e.send(null)},ve=document.getElementById("workplace-tree");let be;document.getElementById("placeitems-tree");const we=document.querySelectorAll(".stat-card"),ke=document.querySelectorAll(".stat-filters .input-filter");document.addEventListener("DOMContentLoaded",(()=>{m&&(m.style.display="none")})),(()=>{if(we&&ke&&ke.forEach((e=>{e.addEventListener("click",(()=>{if(e.checked){for(let t=0;t<we.length;t++)if(we[t].classList.contains(e.dataset.value)){we[t].classList.remove("d-none");const e=we[t].querySelector(".apexchart");d(e,e.dataset.chartName)}}else for(let t=0;t<we.length;t++)we[t].classList.contains(e.dataset.value)&&we[t].classList.add("d-none")}))})),document.querySelector(".today-group")&&(document.querySelector(".today-group-dayw").innerHTML=moment().tz("Europe/Moscow").format("dddd"),document.querySelector(".today-group-day").innerHTML=moment().tz("Europe/Moscow").format("D"),document.querySelector(".today-group-month").innerHTML=moment().tz("Europe/Moscow").format("MMMM")),setInterval((()=>{document.querySelector(".weather-info")&&fe(),document.querySelector(".today-group")&&(document.querySelector(".today-group-dayw").innerHTML=moment().tz("Europe/Moscow").format("dddd"),document.querySelector(".today-group-day").innerHTML=moment().tz("Europe/Moscow").format("D"),document.querySelector(".today-group-month").innerHTML=moment().tz("Europe/Moscow").format("MMMM"))}),3e5),"wide"===L.dataset.sidebarWidth&&S.querySelector("i").classList.add("mdi-crosshairs-gps"),"narrow"===L.dataset.sidebarWidth&&S.querySelector("i").classList.add("mdi-crosshairs"),b&&(w.addEventListener("scroll",k),b.addEventListener("click",x)),S&&L&&S.addEventListener("click",(e=>{(e=>{e.preventDefault();let t=new FormData;t.append("module","sidebar"),"narrow"===L.dataset.sidebarWidth?(L.dataset.sidebarWidth="wide",S.querySelector("i").classList.add("mdi-crosshairs-gps"),S.querySelector("i").classList.remove("mdi-crosshairs"),t.append("sidebarWidth","wide")):"wide"===L.dataset.sidebarWidth&&(L.dataset.sidebarWidth="narrow",S.querySelector("i").classList.remove("mdi-crosshairs-gps"),S.querySelector("i").classList.add("mdi-crosshairs"),t.append("sidebarWidth","narrow")),v("POST","pages/admin/ajax.php",t,"json",(e=>e))})(e)})),E&&E.addEventListener("click",q),C&&C.addEventListener("click",M),($(window).width()>1080||"narrow"===L.dataset.sidebarWidth)&&T&&(T.addEventListener("mouseenter",_),T.addEventListener("mouseleave",M)),D&&F&&H&&(D.addEventListener("click",I),H.addEventListener("click",P)),c&&(()=>{let e=window.location.href.replace(/^.*[\\\/]/,"").replace("#",""),t=c.querySelectorAll(".menu-link"),o=c.querySelectorAll(".submenu-link");for(let o=0,a=t.length;o<a;o++)""===e&&""===t[o].href.replace(/^.*[\\\/]/,"").replace("#","")&&(e="/",t[o].closest(".menu-item").classList.add("active")),""===e&&"index.html"===t[o].href.replace(/^.*[\\\/]/,"").replace("#","")&&(e="index.html",t[o].closest(".menu-item").classList.add("active")),e===t[o].href.replace(/^.*[\\\/]/,"").replace("#","")&&t[o].closest(".menu-item").classList.add("active");for(let t=0,a=o.length;t<a;t++)e===o[t].href.replace(/^.*[\\\/]/,"").replace("#","")&&(o[t].closest(".submenu-item").classList.add("active"),o[t].closest(".menu-item").classList.add("active"));c.addEventListener("click",(e=>{(e=>{e.target.closest(".menu-item").classList.toggle("active")})(e)}))})(),w.addEventListener("scroll",K),document.querySelector(".weather-info")&&fe(),B&&Y&&O(),z&&R&&j(),te&&ae(oe),ee&&(()=>{let e=new FullCalendar.Calendar(ee,{locale:"ru",timeZone:settings.timezone,initialView:"dayGridMonth",height:300,editable:!1,selectable:!0,businessHours:!1,dayMaxEvents:!1,eventClassNames:function({event:e}){return["fc-event-"+Q[e._def.extendedProps.calendar]]},headerToolbar:{right:"prev,title,next",left:"today"},eventSources:[function(e,t){let o={startParam:moment(e.start).tz("Europe/Moscow").format("YYYY-MM-DD"),endParam:moment(e.end).tz("Europe/Moscow").format("YYYY-MM-DD"),calendars:Object.keys(Q),private:"0"};v("GET","components/fullcalendar/events.php",o,"json",(e=>t(e)))}],eventMouseEnter:function(e){"background"!==e.event.display&&function(e){const t="popover-"+e.event.extendedProps.calendar.toLowerCase();new bootstrap.Popover(e.el,{template:'<div class="popover '+t+'" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',title:e.event.title,content:e.event.extendedProps.description,placement:"top"}).show()}(e)},eventMouseLeave:function(){document.querySelectorAll(".popover").forEach((function(e){document.body.removeChild(e)}))}});e.render(),setInterval((()=>{e.refetchEvents()}),1e3)})(),ye&&ge(),X&&J&&X.addEventListener("click",V),B&&Y&&B.addEventListener("change",O),z&&R&&z.addEventListener("change",j),ne(),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),"1"===f){const e=document.querySelector(".toasts-container"),t=e.querySelectorAll(".hide");t&&t.forEach((t=>{e.removeChild(t)})),new bootstrap.Toast(document.querySelector(".toast-script-time")).show()}if(ue&&pe&&he(),document.querySelector(".apexchart1")){let e=new ApexCharts(document.querySelector(".apexchart1"),l("successLineChart"));e.render(),$.getJSON("api/visits/getVisits.php",(function(t){e.updateSeries([{name:"Посещения",data:t}])}))}ve&&(()=>{const e={callback:{onClick:function(e,t,o){alert(o.id+", "+o.name)}},data:{key:{title:"id"},render:function(e,t){return e+t.id}}};v("GET","pages/admin/ajax.php",{module:"workplaces"},"json",(t=>{$.fn.zTree.init($("#workplace-tree"),e,t)})),be=$.fn.zTree.init($("#placeitems-tree"),{},[{id:"01",name:"Устройства",open:!0,icon:"../../assets/img/icons/computer.png",isParent:!0,children:[{id:"01_01",name:"Комплект рабочей станции",icon:"../../assets/img/icons/computer.png",open:!0,isParent:!0,children:[{id:"01_01",name:"Системный блок OLDI",icon:"../../assets/img/icons/compcase.png",isParent:!0,children:[{id:"01_01",name:"Корпус InWin",icon:"../../assets/img/icons/compcase.png",isParent:!1},{id:"01_01",name:"Блок питания InWin",icon:"../../assets/img/icons/computer.png",isParent:!1},{id:"01_01",name:"Материнская плата Gigbyte",icon:"../../assets/img/icons/motherboard.png",isParent:!1},{id:"01_01",name:"Процессор Intel Core2Duo 2800",icon:"../../assets/img/icons/processor.png",isParent:!1},{id:"01_01",name:"Кулер для процессора Cooler Master",icon:"../../assets/img/icons/computer.png",isParent:!1},{id:"01_01",name:"Модуль памяти Kingston DDR2 1Gb",icon:"../../assets/img/icons/memory.png",isParent:!1},{id:"01_01",name:"Модуль памяти Kingston DDR2 1Gb",icon:"../../assets/img/icons/memory.png",isParent:!1},{id:"01_01",name:"Жесткий диск Western Digital 160Gb",icon:"../../assets/img/icons/hdd.png",isParent:!1},{id:"01_01",name:"DVD-RAM Pioneer DRW-2200 BK",icon:"../../assets/img/icons/drive-disc.png",isParent:!1}]},{id:"01_01",name:"Монитор Acer L1620",icon:"../../assets/img/icons/monitor.png",isParent:!1},{id:"01_01",name:"Звуковые колонки Genius G-200",icon:"../../assets/img/icons/speaker.png",isParent:!1},{id:"01_01",name:"Клавиатура Genius BX-200",icon:"../../assets/img/icons/keyboard-full.png",isParent:!1},{id:"01_01",name:"Мышь Genius N-100",icon:"../../assets/img/icons/mouse.png",isParent:!1},{id:"01_01",name:"Принтер Samsung ML-2160",icon:"../../assets/img/icons/printer.png",isParent:!0,children:[{id:"01_01",name:"Картридж DT-101",icon:"../../assets/img/icons/computer.png",isParent:!1}]}]}]},{id:"02",name:"Программное обеспечение",open:!0,icon:"../../assets/img/icons/windows.png",isParent:!0,children:[{id:"01_01",name:"ОС Windows 10 Professional x64",icon:"../../assets/img/icons/windows.png",isParent:!1}]}])})(),r&&s()})()}();
//# sourceMappingURL=app.js.map